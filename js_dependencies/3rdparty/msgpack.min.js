/* esm.sh - esbuild bundle(@msgpack/msgpack@2.7.2) es2021 production */
var v=4294967295;function H(i,e,t){var r=t/4294967296,s=t;i.setUint32(e,r),i.setUint32(e+4,s)}function A(i,e,t){var r=Math.floor(t/4294967296),s=t;i.setUint32(e,r),i.setUint32(e+4,s)}function D(i,e){var t=i.getInt32(e),r=i.getUint32(e+4);return t*4294967296+r}function X(i,e){var t=i.getUint32(e),r=i.getUint32(e+4);return t*4294967296+r}var k,O,F,M=(typeof __Process$>"u"||((k=__Process$==null?void 0:__Process$.env)===null||k===void 0?void 0:k.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function R(i){for(var e=i.length,t=0,r=0;r<e;){var s=i.charCodeAt(r++);if((s&4294967168)===0){t++;continue}else if((s&4294965248)===0)t+=2;else{if(s>=55296&&s<=56319&&r<e){var n=i.charCodeAt(r);(n&64512)===56320&&(++r,s=((s&1023)<<10)+(n&1023)+65536)}(s&4294901760)===0?t+=3:t+=4}}return t}function b(i,e,t){for(var r=i.length,s=t,n=0;n<r;){var o=i.charCodeAt(n++);if((o&4294967168)===0){e[s++]=o;continue}else if((o&4294965248)===0)e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&n<r){var f=i.charCodeAt(n);(f&64512)===56320&&(++n,o=((o&1023)<<10)+(f&1023)+65536)}(o&4294901760)===0?(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128):(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128)}e[s++]=o&63|128}}var S=M?new TextEncoder:void 0,W=M?typeof __Process$<"u"&&((O=__Process$==null?void 0:__Process$.env)===null||O===void 0?void 0:O.TEXT_ENCODING)!=="force"?200:0:v;function oe(i,e,t){e.set(S.encode(i),t)}function ae(i,e,t){S.encodeInto(i,e.subarray(t))}var G=(S==null?void 0:S.encodeInto)?ae:oe,fe=4096;function C(i,e,t){for(var r=e,s=r+t,n=[],o="";r<s;){var f=i[r++];if((f&128)===0)n.push(f);else if((f&224)===192){var c=i[r++]&63;n.push((f&31)<<6|c)}else if((f&240)===224){var c=i[r++]&63,a=i[r++]&63;n.push((f&31)<<12|c<<6|a)}else if((f&248)===240){var c=i[r++]&63,a=i[r++]&63,h=i[r++]&63,d=(f&7)<<18|c<<12|a<<6|h;d>65535&&(d-=65536,n.push(d>>>10&1023|55296),d=56320|d&1023),n.push(d)}else n.push(f);n.length>=fe&&(o+=String.fromCharCode.apply(String,n),n.length=0)}return n.length>0&&(o+=String.fromCharCode.apply(String,n)),o}var ce=M?new TextDecoder:null,K=M?typeof __Process$<"u"&&((F=__Process$==null?void 0:__Process$.env)===null||F===void 0?void 0:F.TEXT_DECODER)!=="force"?200:0:v;function Y(i,e,t){var r=i.subarray(e,e+t);return ce.decode(r)}var g=function(){function i(e,t){this.type=e,this.data=t}return i}();var he=function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),x=function(i){he(e,i);function e(t){var r=i.call(this,t)||this,s=Object.create(e.prototype);return Object.setPrototypeOf(r,s),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:e.name}),r}return e}(Error);var J=-1,ue=4294967296-1,le=17179869184-1;function q(i){var e=i.sec,t=i.nsec;if(e>=0&&t>=0&&e<=le)if(t===0&&e<=ue){var r=new Uint8Array(4),s=new DataView(r.buffer);return s.setUint32(0,e),r}else{var n=e/4294967296,o=e&4294967295,r=new Uint8Array(8),s=new DataView(r.buffer);return s.setUint32(0,t<<2|n&3),s.setUint32(4,o),r}else{var r=new Uint8Array(12),s=new DataView(r.buffer);return s.setUint32(0,t),A(s,4,e),r}}function Z(i){var e=i.getTime(),t=Math.floor(e/1e3),r=(e-t*1e3)*1e6,s=Math.floor(r/1e9);return{sec:t+s,nsec:r-s*1e9}}function Q(i){if(i instanceof Date){var e=Z(i);return q(e)}else return null}function $(i){var e=new DataView(i.buffer,i.byteOffset,i.byteLength);switch(i.byteLength){case 4:{var t=e.getUint32(0),r=0;return{sec:t,nsec:r}}case 8:{var s=e.getUint32(0),n=e.getUint32(4),t=(s&3)*4294967296+n,r=s>>>2;return{sec:t,nsec:r}}case 12:{var t=D(e,4),r=e.getUint32(0);return{sec:t,nsec:r}}default:throw new x("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(i.length))}}function j(i){var e=$(i);return new Date(e.sec*1e3+e.nsec/1e6)}var ee={type:J,encode:Q,decode:j};var I=function(){function i(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(ee)}return i.prototype.register=function(e){var t=e.type,r=e.encode,s=e.decode;if(t>=0)this.encoders[t]=r,this.decoders[t]=s;else{var n=1+t;this.builtInEncoders[n]=r,this.builtInDecoders[n]=s}},i.prototype.tryToEncode=function(e,t){for(var r=0;r<this.builtInEncoders.length;r++){var s=this.builtInEncoders[r];if(s!=null){var n=s(e,t);if(n!=null){var o=-1-r;return new g(o,n)}}}for(var r=0;r<this.encoders.length;r++){var s=this.encoders[r];if(s!=null){var n=s(e,t);if(n!=null){var o=r;return new g(o,n)}}}return e instanceof g?e:null},i.prototype.decode=function(e,t,r){var s=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return s?s(e,t,r):new g(t,e)},i.defaultCodec=new i,i}();function U(i){return i instanceof Uint8Array?i:ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i instanceof ArrayBuffer?new Uint8Array(i):Uint8Array.from(i)}function te(i){if(i instanceof ArrayBuffer)return new DataView(i);var e=U(i);return new DataView(e.buffer,e.byteOffset,e.byteLength)}var de=100,pe=2048,P=function(){function i(e,t,r,s,n,o,f,c){e===void 0&&(e=I.defaultCodec),t===void 0&&(t=void 0),r===void 0&&(r=de),s===void 0&&(s=pe),n===void 0&&(n=!1),o===void 0&&(o=!1),f===void 0&&(f=!1),c===void 0&&(c=!1),this.extensionCodec=e,this.context=t,this.maxDepth=r,this.initialBufferSize=s,this.sortKeys=n,this.forceFloat32=o,this.ignoreUndefined=f,this.forceIntegerToFloat=c,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return i.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},i.prototype.reinitializeState=function(){this.pos=0},i.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.getUint8Array()},i.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth ".concat(t));e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.encodeObject(e,t)},i.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(t*2)},i.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),r=new Uint8Array(t),s=new DataView(t);r.set(this.bytes),this.view=s,this.bytes=r},i.prototype.encodeNil=function(){this.writeU8(192)},i.prototype.encodeBoolean=function(e){e===!1?this.writeU8(194):this.writeU8(195)},i.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},i.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error("Too long string: ".concat(e," bytes in UTF-8"))},i.prototype.encodeString=function(e){var t=1+4,r=e.length;if(r>W){var s=R(e);this.ensureBufferSizeToWrite(t+s),this.writeStringHeader(s),G(e,this.bytes,this.pos),this.pos+=s}else{var s=R(e);this.ensureBufferSizeToWrite(t+s),this.writeStringHeader(s),b(e,this.bytes,this.pos),this.pos+=s}},i.prototype.encodeObject=function(e,t){var r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,t);else throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)))},i.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw new Error("Too large binary: ".concat(t));var r=U(e);this.writeU8a(r)},i.prototype.encodeArray=function(e,t){var r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error("Too large array: ".concat(r));for(var s=0,n=e;s<n.length;s++){var o=n[s];this.doEncode(o,t+1)}},i.prototype.countWithoutUndefined=function(e,t){for(var r=0,s=0,n=t;s<n.length;s++){var o=n[s];e[o]!==void 0&&r++}return r},i.prototype.encodeMap=function(e,t){var r=Object.keys(e);this.sortKeys&&r.sort();var s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error("Too large map object: ".concat(s));for(var n=0,o=r;n<o.length;n++){var f=o[n],c=e[f];this.ignoreUndefined&&c===void 0||(this.encodeString(f),this.doEncode(c,t+1))}},i.prototype.encodeExtension=function(e){var t=e.data.length;if(t===1)this.writeU8(212);else if(t===2)this.writeU8(213);else if(t===4)this.writeU8(214);else if(t===8)this.writeU8(215);else if(t===16)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw new Error("Too large extension object: ".concat(t));this.writeI8(e.type),this.writeU8a(e.data)},i.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},i.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},i.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},i.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},i.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},i.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},i.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},i.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},i.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},i.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),H(this.view,this.pos,e),this.pos+=8},i.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),A(this.view,this.pos,e),this.pos+=8},i}();var xe={};function ve(i,e){e===void 0&&(e=xe);var t=new P(e.extensionCodec,e.context,e.maxDepth,e.initialBufferSize,e.sortKeys,e.forceFloat32,e.ignoreUndefined,e.forceIntegerToFloat);return t.encode(i)}function z(i){return"".concat(i<0?"-":"","0x").concat(Math.abs(i).toString(16).padStart(2,"0"))}var we=16,ye=16,re=function(){function i(e,t){e===void 0&&(e=we),t===void 0&&(t=ye),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var r=0;r<this.maxKeyLength;r++)this.caches.push([])}return i.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},i.prototype.find=function(e,t,r){var s=this.caches[r-1];e:for(var n=0,o=s;n<o.length;n++){for(var f=o[n],c=f.bytes,a=0;a<r;a++)if(c[a]!==e[t+a])continue e;return f.str}return null},i.prototype.store=function(e,t){var r=this.caches[e.length-1],s={bytes:e,str:t};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)},i.prototype.decode=function(e,t,r){var s=this.find(e,t,r);if(s!=null)return this.hit++,s;this.miss++;var n=C(e,t,r),o=Uint8Array.prototype.slice.call(e,t,t+r);return this.store(o,n),n},i}();var me=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function f(h){try{a(r.next(h))}catch(d){o(d)}}function c(h){try{a(r.throw(h))}catch(d){o(d)}}function a(h){h.done?n(h.value):s(h.value).then(f,c)}a((r=r.apply(i,e||[])).next())})},V=function(i,e){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,s,n,o;return o={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function f(a){return function(h){return c([a,h])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,s&&(n=a[0]&2?s.return:a[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,a[1])).done)return n;switch(s=0,n&&(a=[a[0]&2,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,s=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){t.label=a[1];break}if(a[0]===6&&t.label<n[1]){t.label=n[1],n=a;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(a);break}n[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(i,t)}catch(h){a=[6,h],s=0}finally{r=n=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},ie=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=i[n]&&function(o){return new Promise(function(f,c){o=i[n](o),s(f,c,o.done,o.value)})}}function s(n,o,f,c){Promise.resolve(c).then(function(a){n({value:a,done:f})},o)}},E=function(i){return this instanceof E?(this.v=i,this):new E(i)},ge=function(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(i,e||[]),s,n=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(u){r[u]&&(s[u]=function(l){return new Promise(function(p,m){n.push([u,l,p,m])>1||f(u,l)})})}function f(u,l){try{c(r[u](l))}catch(p){d(n[0][3],p)}}function c(u){u.value instanceof E?Promise.resolve(u.value.v).then(a,h):d(n[0][2],u)}function a(u){f("next",u)}function h(u){f("throw",u)}function d(u,l){u(l),n.shift(),n.length&&f(n[0][0],n[0][1])}},Ue=function(i){var e=typeof i;return e==="string"||e==="number"},_=-1,N=new DataView(new ArrayBuffer(0)),Ee=new Uint8Array(N.buffer),L=function(){try{N.getInt8(0)}catch(i){return i.constructor}throw new Error("never reached")}(),ne=new L("Insufficient data"),Te=new re,w=function(){function i(e,t,r,s,n,o,f,c){e===void 0&&(e=I.defaultCodec),t===void 0&&(t=void 0),r===void 0&&(r=v),s===void 0&&(s=v),n===void 0&&(n=v),o===void 0&&(o=v),f===void 0&&(f=v),c===void 0&&(c=Te),this.extensionCodec=e,this.context=t,this.maxStrLength=r,this.maxBinLength=s,this.maxArrayLength=n,this.maxMapLength=o,this.maxExtLength=f,this.keyDecoder=c,this.totalPos=0,this.pos=0,this.view=N,this.bytes=Ee,this.headByte=_,this.stack=[]}return i.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=_,this.stack.length=0},i.prototype.setBuffer=function(e){this.bytes=U(e),this.view=te(this.bytes),this.pos=0},i.prototype.appendBuffer=function(e){if(this.headByte===_&&!this.hasRemaining(1))this.setBuffer(e);else{var t=this.bytes.subarray(this.pos),r=U(e),s=new Uint8Array(t.length+r.length);s.set(t),s.set(r,t.length),this.setBuffer(s)}},i.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},i.prototype.createExtraByteError=function(e){var t=this,r=t.view,s=t.pos;return new RangeError("Extra ".concat(r.byteLength-s," of ").concat(r.byteLength," byte(s) found at buffer[").concat(e,"]"))},i.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},i.prototype.decodeMulti=function(e){return V(this,function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}})},i.prototype.decodeAsync=function(e){var t,r,s,n;return me(this,void 0,void 0,function(){var o,f,c,a,h,d,u,l;return V(this,function(p){switch(p.label){case 0:o=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),t=ie(e),p.label=2;case 2:return[4,t.next()];case 3:if(r=p.sent(),!!r.done)return[3,5];if(c=r.value,o)throw this.createExtraByteError(this.totalPos);this.appendBuffer(c);try{f=this.doDecodeSync(),o=!0}catch(m){if(!(m instanceof L))throw m}this.totalPos+=this.pos,p.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return a=p.sent(),s={error:a},[3,12];case 7:return p.trys.push([7,,10,11]),r&&!r.done&&(n=t.return)?[4,n.call(t)]:[3,9];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(s)throw s.error;return[7];case 11:return[7];case 12:if(o){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,f]}throw h=this,d=h.headByte,u=h.pos,l=h.totalPos,new RangeError("Insufficient data in parsing ".concat(z(d)," at ").concat(l," (").concat(u," in the current buffer)"))}})})},i.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},i.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},i.prototype.decodeMultiAsync=function(e,t){return ge(this,arguments,function(){var s,n,o,f,c,a,h,d,u;return V(this,function(l){switch(l.label){case 0:s=t,n=-1,l.label=1;case 1:l.trys.push([1,13,14,19]),o=ie(e),l.label=2;case 2:return[4,E(o.next())];case 3:if(f=l.sent(),!!f.done)return[3,12];if(c=f.value,t&&n===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(c),s&&(n=this.readArraySize(),s=!1,this.complete()),l.label=4;case 4:l.trys.push([4,9,,10]),l.label=5;case 5:return[4,E(this.doDecodeSync())];case 6:return[4,l.sent()];case 7:return l.sent(),--n===0?[3,8]:[3,5];case 8:return[3,10];case 9:if(a=l.sent(),!(a instanceof L))throw a;return[3,10];case 10:this.totalPos+=this.pos,l.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return h=l.sent(),d={error:h},[3,19];case 14:return l.trys.push([14,,17,18]),f&&!f.done&&(u=o.return)?[4,E(u.call(o))]:[3,16];case 15:l.sent(),l.label=16;case 16:return[3,18];case 17:if(d)throw d.error;return[7];case 18:return[7];case 19:return[2]}})})},i.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){var r=e-128;if(r!==0){this.pushMapState(r),this.complete();continue e}else t={}}else if(e<160){var r=e-144;if(r!==0){this.pushArrayState(r),this.complete();continue e}else t=[]}else{var s=e-160;t=this.decodeUtf8String(s,0)}else if(e===192)t=null;else if(e===194)t=!1;else if(e===195)t=!0;else if(e===202)t=this.readF32();else if(e===203)t=this.readF64();else if(e===204)t=this.readU8();else if(e===205)t=this.readU16();else if(e===206)t=this.readU32();else if(e===207)t=this.readU64();else if(e===208)t=this.readI8();else if(e===209)t=this.readI16();else if(e===210)t=this.readI32();else if(e===211)t=this.readI64();else if(e===217){var s=this.lookU8();t=this.decodeUtf8String(s,1)}else if(e===218){var s=this.lookU16();t=this.decodeUtf8String(s,2)}else if(e===219){var s=this.lookU32();t=this.decodeUtf8String(s,4)}else if(e===220){var r=this.readU16();if(r!==0){this.pushArrayState(r),this.complete();continue e}else t=[]}else if(e===221){var r=this.readU32();if(r!==0){this.pushArrayState(r),this.complete();continue e}else t=[]}else if(e===222){var r=this.readU16();if(r!==0){this.pushMapState(r),this.complete();continue e}else t={}}else if(e===223){var r=this.readU32();if(r!==0){this.pushMapState(r),this.complete();continue e}else t={}}else if(e===196){var r=this.lookU8();t=this.decodeBinary(r,1)}else if(e===197){var r=this.lookU16();t=this.decodeBinary(r,2)}else if(e===198){var r=this.lookU32();t=this.decodeBinary(r,4)}else if(e===212)t=this.decodeExtension(1,0);else if(e===213)t=this.decodeExtension(2,0);else if(e===214)t=this.decodeExtension(4,0);else if(e===215)t=this.decodeExtension(8,0);else if(e===216)t=this.decodeExtension(16,0);else if(e===199){var r=this.lookU8();t=this.decodeExtension(r,1)}else if(e===200){var r=this.lookU16();t=this.decodeExtension(r,2)}else if(e===201){var r=this.lookU32();t=this.decodeExtension(r,4)}else throw new x("Unrecognized type byte: ".concat(z(e)));this.complete();for(var n=this.stack;n.length>0;){var o=n[n.length-1];if(o.type===0)if(o.array[o.position]=t,o.position++,o.position===o.size)n.pop(),t=o.array;else continue e;else if(o.type===1){if(!Ue(t))throw new x("The type of key must be string or number but "+typeof t);if(t==="__proto__")throw new x("The key __proto__ is not allowed");o.key=t,o.type=2;continue e}else if(o.map[o.key]=t,o.readCount++,o.readCount===o.size)n.pop(),t=o.map;else{o.key=null,o.type=1;continue e}}return t}},i.prototype.readHeadByte=function(){return this.headByte===_&&(this.headByte=this.readU8()),this.headByte},i.prototype.complete=function(){this.headByte=_},i.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new x("Unrecognized array type byte: ".concat(z(e)))}}},i.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new x("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},i.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new x("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:0,size:e,array:new Array(e),position:0})},i.prototype.decodeUtf8String=function(e,t){var r;if(e>this.maxStrLength)throw new x("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw ne;var s=this.pos+t,n;return this.stateIsMapKey()&&((r=this.keyDecoder)===null||r===void 0?void 0:r.canBeCached(e))?n=this.keyDecoder.decode(this.bytes,s,e):e>K?n=Y(this.bytes,s,e):n=C(this.bytes,s,e),this.pos+=t+e,n},i.prototype.stateIsMapKey=function(){if(this.stack.length>0){var e=this.stack[this.stack.length-1];return e.type===1}return!1},i.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new x("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw ne;var r=this.pos+t,s=this.bytes.subarray(r,r+e);return this.pos+=t+e,s},i.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new x("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var r=this.view.getInt8(this.pos+t),s=this.decodeBinary(e,t+1);return this.extensionCodec.decode(s,r,this.context)},i.prototype.lookU8=function(){return this.view.getUint8(this.pos)},i.prototype.lookU16=function(){return this.view.getUint16(this.pos)},i.prototype.lookU32=function(){return this.view.getUint32(this.pos)},i.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},i.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},i.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},i.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},i.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},i.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},i.prototype.readU64=function(){var e=X(this.view,this.pos);return this.pos+=8,e},i.prototype.readI64=function(){var e=D(this.view,this.pos);return this.pos+=8,e},i.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},i.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},i}();var y={};function Se(i,e){e===void 0&&(e=y);var t=new w(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength);return t.decode(i)}function Ie(i,e){e===void 0&&(e=y);var t=new w(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength);return t.decodeMulti(i)}var _e=function(i,e){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,s,n,o;return o={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function f(a){return function(h){return c([a,h])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,s&&(n=a[0]&2?s.return:a[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,a[1])).done)return n;switch(s=0,n&&(a=[a[0]&2,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,s=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){t.label=a[1];break}if(a[0]===6&&t.label<n[1]){t.label=n[1],n=a;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(a);break}n[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(i,t)}catch(h){a=[6,h],s=0}finally{r=n=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},T=function(i){return this instanceof T?(this.v=i,this):new T(i)},Ae=function(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(i,e||[]),s,n=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(u){r[u]&&(s[u]=function(l){return new Promise(function(p,m){n.push([u,l,p,m])>1||f(u,l)})})}function f(u,l){try{c(r[u](l))}catch(p){d(n[0][3],p)}}function c(u){u.value instanceof T?Promise.resolve(u.value.v).then(a,h):d(n[0][2],u)}function a(u){f("next",u)}function h(u){f("throw",u)}function d(u,l){u(l),n.shift(),n.length&&f(n[0][0],n[0][1])}};function De(i){return i[Symbol.asyncIterator]!=null}function Me(i){if(i==null)throw new Error("Assertion Failure: value must not be null nor undefined")}function Ce(i){return Ae(this,arguments,function(){var t,r,s,n;return _e(this,function(o){switch(o.label){case 0:t=i.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,T(t.read())];case 3:return r=o.sent(),s=r.done,n=r.value,s?[4,T(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return Me(n),[4,T(n)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function B(i){return De(i)?i:Ce(i)}var ze=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function f(h){try{a(r.next(h))}catch(d){o(d)}}function c(h){try{a(r.throw(h))}catch(d){o(d)}}function a(h){h.done?n(h.value):s(h.value).then(f,c)}a((r=r.apply(i,e||[])).next())})},Le=function(i,e){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,s,n,o;return o={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function f(a){return function(h){return c([a,h])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,s&&(n=a[0]&2?s.return:a[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,a[1])).done)return n;switch(s=0,n&&(a=[a[0]&2,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,s=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){t.label=a[1];break}if(a[0]===6&&t.label<n[1]){t.label=n[1],n=a;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(a);break}n[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(i,t)}catch(h){a=[6,h],s=0}finally{r=n=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};function Be(i,e){return e===void 0&&(e=y),ze(this,void 0,void 0,function(){var t,r;return Le(this,function(s){return t=B(i),r=new w(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength),[2,r.decodeAsync(t)]})})}function ke(i,e){e===void 0&&(e=y);var t=B(i),r=new w(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength);return r.decodeArrayStream(t)}function se(i,e){e===void 0&&(e=y);var t=B(i),r=new w(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength);return r.decodeStream(t)}function Oe(i,e){return e===void 0&&(e=y),se(i,e)}export{L as DataViewIndexOutOfBoundsError,x as DecodeError,w as Decoder,J as EXT_TIMESTAMP,P as Encoder,g as ExtData,I as ExtensionCodec,Se as decode,ke as decodeArrayStream,Be as decodeAsync,Ie as decodeMulti,se as decodeMultiStream,Oe as decodeStream,j as decodeTimestampExtension,$ as decodeTimestampToTimeSpec,ve as encode,Z as encodeDateToTimeSpec,q as encodeTimeSpecToTimestamp,Q as encodeTimestampExtension};
